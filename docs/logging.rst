.. _logging:


Logging Config
==============

The logging is controlled by the python logging module.

There are two loggers used throughout.

* vault_gcp_key_rotation
* urllib

The package and modules mainly use the 'vault_gcp_key_rotation' logger.  
Individual loggers are created for each module which will allow for specific modules to be configured differently if required.

The 'urllib' logger is used to capture output generated by the urllib / requests modules when making HTTP(S) calls to teh Vault server.
The code also makes use of this logger to log additional info about the HTTP(S) calls, i.e. the request and response payloads.

The sample logging config used by the package is shown below. 
This requries that variables are set for 'logfilename' and 'urlliblogfilename'. 
These get set in the sample calling script.

.. code-block::

    [loggers]
    keys=root,vault_gcp_key_rotation,urllib

    [handlers]
    keys=consoleHandler,fileHandler,nullHandler,URLHandler

    [formatters]
    keys=simpleFormatter

    [logger_root]
    handlers=nullHandler

    [logger_vault_gcp_key_rotation]
    level=DEBUG
    handlers=consoleHandler,fileHandler
    qualname=vault_gcp_key_rotation
    propogate=0

    [logger_urllib]
    level=DEBUG
    handlers=URLHandler
    qualname=urllib3
    propogate=0

    [handler_nullHandler]
    class=NullHandler

    [handler_consoleHandler]
    class=StreamHandler
    level=INFO
    formatter=simpleFormatter
    args=(sys.stdout,)

    [handler_fileHandler]
    class=FileHandler
    level=DEBUG
    formatter=simpleFormatter
    args=('%(logfilename)s',)

    [handler_URLHandler]
    class=FileHandler
    level=DEBUG
    formatter=simpleFormatter
    args=('%(urlliblogfilename)s',)

    [formatter_simpleFormatter]
    format=%(asctime)s - %(name)s - %(levelname)s - %(message)s
    datefmt=

